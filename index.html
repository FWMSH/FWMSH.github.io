<!DOCTYPE html/css>
<html>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-169285999-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-169285999-1');
    </script>

    <style>

      @font-face {
      font-family: Gotham-Bold;
      src: url(Gotham-Bold.otf);
      }
      @font-face {
        font-family: Gotham-Book;
        src: url(Gotham-Book.otf);
      }

      body {
        background-color: #003066;
      }

      #header {
        min-height: 15%;
        font-size: 100px;
        text-align: center;
        display: flex;
        justify-content: center;
        align-content: center;
        flex-direction: column;
        font-family: Gotham-Bold;
        color: white;
      }
      #space {
      }
      #history {
      }
      #science {
      }
      #project-planet {
      }
      .option {
        width: 95%;
        font-size: 80px;
        color: white;
        min-height: 10%;
        font-family: Gotham-Book;
        margin-top: 10px;
        margin-bottom: 10px;
        margin-left: 20px;
        margin-right: 20px;
        background-color: #6e298d;
        border: 0px;
        border-radius: 100px;
      }
      #overlay {
        position: absolute;
        display: block;
        width: 100%;
        height: 100%;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 0;
        margin-left: auto;
        margin-right: auto;
        background-color: rgba(0,0,0,0.9);
      }
      #audio-check {
        color: white;
        text-align: center;
        font-family: Gotham-Book;
        font-size: 75px;
        margin-top: 10%;
        padding: 25px;
      }
      #testSoundButton {
        color: white;
        font-family: Gotham-Book;
        font-size: 65px;
        background-color: #db0961;
        border-radius: 50px;
        width: 75%;
        height: 120px;
        border: 0px;
      }
      #endSoundTestButton {
        color: white;
        font-family: Gotham-Book;
        font-size: 75px;
        background-color: #009760;
        border-radius: 50px;
        width: 75%;
        height: 120px;
        border: 0px;
      }

      * {
        -webkit-text-size-adjust: none;
        touch-action: manipulation;
      }
    </style>
  </head>
  <body>
    <div id='overlay'>
      <div id='audio-check'>
        <audio id='testSound' onended='resetButton()'>
          <source src='sound-test.wav'>
        </audio>
        <p>
        Before we get started, let's check your audio level.
        <p>
        <button id='testSoundButton' onclick='playTestSound()'>Play test sound</button>
        <p>
        Please be considerate of other guests and keep your audio no louder than you need to hear the content.
        <p>
        <button id='endSoundTestButton' onclick='dismissPopup()'>Okay, let's go!</button>
      </div>
    </div>
    <div id='header'>Discovery Zone</div>
    <div id='optionList'>
      <button class='option' id='space' onclick='switchPage("space/space.html")'>Launchpad</button>
      <button class='option' id='science'>Natural history</button>
      <button class='option' id='history'>History</button>
      <button class='option' id='project-planet'>Project Planet</button>
      <button class='option' id='innovation'>Main Gallery</button>
      <a href="puzzle/puzzle.html"><button class='option' id='space'>Puzzle</button></a>
    </div>
  </body>
  <script>

  // User preferences to pass back and forth with the other pages
  var lang = 'en';
  var mediaType = 'text';

  // Check for options passed from previous page
  var queryString = decodeURIComponent(window.location.search);

  var searchParams = new URLSearchParams(queryString);
  if(searchParams.has('skipAudioCheck')) {
    dismissPopup();
  }
  if(searchParams.has('lang')) {
    lang = searchParams.get('lang');
  }
  if(searchParams.has('mediaType')) {
    mediaType = searchParams.get('mediaType');
  }

  function switchPage(page) {

    // Function to switch pages while appending the user preferences

    var link = page + '?lang='+lang+'&mediaType='+mediaType;

    window.location.href = link;
  }

  function dismissPopup() {

    // Hide the overlay

    document.getElementById('overlay').style.display = 'none';
  }

  function resetButton() {

    // Called after audio stops to reset the button text.

    button = document.getElementById('testSoundButton');
    button.innerHTML = 'Play again';
  }

  function playTestSound() {

    sound = document.getElementById('testSound');
    button = document.getElementById('testSoundButton');

    sound.play();
    button.innerHTML = 'Playing...';
  }

  </script>

</html>
