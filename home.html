<!DOCTYPE html/css/javascript>
<html>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-169285999-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-169285999-1');
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Explore the Museum</title>

    <style>

      @font-face {
      font-family: Gotham-Bold;
      src: url(Gotham-Bold.otf);
      }
      @font-face {
        font-family: Gotham-Book;
        src: url(Gotham-Book.otf);
      }

      body {
        background-color: #003066;
      }

      #header {
        display: flex;
        justify-content: center;
        height: 16vh;
        position: fixed;
        top: 0px;
        background-color: #003066;
      }
      #galleryList{
        /*padding-top: 16vh;*/
      }
      #space {
      }
      #history {
      }
      #science {
      }
      #project-planet {
      }
      #puzzle {
        display: none;
      }
      .gallery {
        width: 100%;
        font-size: 60px;
        color: white;
        /*min-height: 10%;*/
        text-align: left;
        font-family: Gotham-Book;
        margin-top: 0px;
        margin-bottom: 0px;
        margin-left: 20px;
        margin-right: 20px;
        background-color: #6e298d;
        border: 0px;
        outline: none;
        padding: 18px;
        /*border-radius: 100px;*/
      }
      .galleryDetails {
        width: 95%;
        display: none;
        font-size: 45px;
        color: white;
        /*min-height: 10%;*/
        text-align: left;
        font-family: Gotham-Book;
        margin-left: 40px;
        transition: display 0.2s ease-out;
      }
      .exploreButton {
        font-size: 50px;
        color: white;
        /*min-height: 10%;*/
        text-align: left;
        font-family: Gotham-Book;
        margin-top: 0px;
        margin-bottom: 20px;
        margin-right: 20px;
        background-color: #db0961;
        border: 0px;
        padding: 18px;
        /*border-radius: 100px;*/
      }
      .accordion {
        background-color: #eee;
        color: #444;
        padding: 18px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 75px;
        transition: 0.4s;
        font-family: Gotham-Bold;
      }
      .active, .accordion:hover {
        background-color: #ccc;
      }
      .accordionPanel {
        padding: 0 18px;
        background-color: #003066;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.2s ease-out;
      }
      #galleryAccordion {
        padding-top: 16vh;
      }
      #galleryAccordionPanel {
      }
      #rotationWarning {
        position: fixed;
        display: none;
        width: 100%;
        height: 100%;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 0;
        margin-left: auto;
        margin-right: auto;
        background-color: rgba(0,0,0,0.9);
        font-size: 60px;
        color: white;
        font-family: Gotham-Book;
        text-align: center;
        padding-top: 10%;
      }

      * {
        -webkit-text-size-adjust: none;
        touch-action: manipulation;
      }
      button:active {
        outline: none;
        border: none;
      }
    </style>
  </head>
  <body>
    <div id='header'><img src='FWMSH_logo.png' style='object-fit: cover; width: 100%;'></div>
    <button class="accordion" id='galleryAccordion'>Galleries</button>
    <div class="accordionPanel" id='galleryAccordionPanel'>
      <div id='galleryList'>
        <button class='gallery' id='space' onclick='toggleDetails("spaceDetails")'>Launchpad</button>
        <div class='galleryDetails' id='spaceDetails'>
          50 years ago, we landed on the Moon. Where will we be 50 years from now?<br>
          <button class='exploreButton' onclick='switchPage("space/space.html")'>Explore</button>
        </div>
        <button class='gallery' id='science' onclick='toggleDetails("scienceDetails")'>Texas Ecosystems</button>
        <div class='galleryDetails' id='scienceDetails'>
          Discover the incredible diversity of Texas wildlife<br>
          <button class='exploreButton'>Explore</button>
        </div>
        <button class='gallery' id='history' onclick='toggleDetails("historyDetails")'>Beads</button>
        <div class='galleryDetails' id='historyDetails'>
          Uncover the hidden history of beads<br>
          <button class='exploreButton'>Explore</button>
        </div>
        <button class='gallery' id='project-planet' onclick='toggleDetails("ppDetails")'>Project Planet</button>
        <div class='galleryDetails' id='ppDetails'>
          Our world is changing. What will you do?<br>
          <button class='exploreButton'>Explore</button>
        </div>
        <button class='gallery' id='innovation' onclick='toggleDetails("wheelsDetails")'>Wheels</button>
        <div class='galleryDetails' id='wheelsDetails'>
          What's your favorite thing with wheels?<br>
          <button class='exploreButton'>Explore</button>
        </div>
      </div>
    </div>
    <button class="accordion">Map</button>
    <div class="accordionPanel">
      <img src='map_en.jpg'></img>
    </div>
    <div id='rotationWarning'>Please rotate your device</overlay>
  </body>
  <script>

  // User preferences to pass back and forth with the other pages
  var lang = 'en';
  var mediaType = 'text';
  var fontSize = 45;

  // Check for options passed from previous page
  var queryString = decodeURIComponent(window.location.search);

  var searchParams = new URLSearchParams(queryString);
  if (searchParams.has('lang')) {
    lang = searchParams.get('lang');
    if (lang == 'es') {
      document.getElementById('rotationWarning').innerHTML = 'Roate tu dispositivo';
    }
  }
  if (searchParams.has('mediaType')) {
    mediaType = searchParams.get('mediaType');
  }
  if (searchParams.has('fontSize')) {
    fontSize = searchParams.get('fontSize');
  }

  function switchPage(page) {

    // Function to switch pages while appending the user preferences

    var link = page + '?lang='+lang+'&mediaType='+mediaType+'&fontSize='+fontSize;

    window.location.href = link;
  }

  function toggleDetails(id) {

    // Expand/collapse the details list for one gallery and collapse any others

    var touched = document.getElementById(id);
    var galDetails = document.getElementsByClassName("galleryDetails");
    if ($('#'+id).css('display') == 'none') {
      //touched.style.display = 'block';
      $("#"+id).css("display", "block").hide().slideDown();
    } else $("#"+id).css("display", "none").show().slideUp();

    // Loop through all the galleries to hide any active ones
    for (i = 0; i < galDetails.length; i++) {
      if (galDetails[i] != touched && $("#"+galDetails[i].id).css('display') == 'block'){
        $("#"+galDetails[i].id).css("display", "none").show().slideUp();
      }
    }

  }

  // Code to handle showing/hiding the accordion elements
  // This binds an action to each accordion button
  var accordion = document.getElementsByClassName("accordion");
  var panels = document.getElementsByClassName("accordionPanel");
  for (i = 0; i < accordion.length; i++) {
    accordion[i].addEventListener("click", function() {
      var panel = this.nextElementSibling;
      for (j=0;j<panels.length;j++){
        if (panels[j] != panel) {
          panels[j].style.maxHeight = null;
          panels[j].classList.remove("active");
        } else {
          if (panel.style.maxHeight) {
            panel.style.maxHeight = null;
            panel.classList.remove("active");
          } else {
            panel.style.maxHeight = "1000px";//panel.scrollHeight + "px";
            panel.classList.add("active");
          }
        }
      }
    });
  };
  // Set gallery list to be open by default
  var galleryAccordionPanel = document.getElementById('galleryAccordionPanel')
  galleryAccordionPanel.style.maxHeight = galleryAccordionPanel.scrollHeight + "px";
  galleryAccordionPanel.style.maxHeight = '1000px';

  // Detect landscape and warn
  $(window).resize(function() {
    var screenAspect = $(this).width()/$(this).height();
    var overlay = document.getElementById('rotationWarning');

    if (screenAspect > 1) {
      overlay.style.display = 'block';
    } else {
      overlay.style.display = 'none';
    }
  });

  </script>

</html>
