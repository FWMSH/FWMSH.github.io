<!DOCTYPE html/css/javascript>
<html>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-169285999-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-169285999-1');
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Explore the Museum</title>

    <style>

      @font-face {
      font-family: Gotham-Bold;
      src: url(Gotham-Bold.otf);
      }
      @font-face {
        font-family: Gotham-Book;
        src: url(Gotham-Book.otf);
      }

      body {
        background-color: #003066;
      }

      h3 {
        font-family: Gotham-Bold;
        font-size: 70px;
        margin-top: 10px;
        margin-bottom: 10px;
      }
      h5 {
        font-family: Gotham-Bold;
        font-size: 50px;
        margin-top: 10px;
        margin-bottom: 10px;
      }

      #header {
        display: flex;
        justify-content: center;
        height: 16vh;
        position: fixed;
        top: 0px;
        background-color: #003066;
      }
      #galleryList{
        /*padding-top: 16vh;*/
      }
      #space {
      }
      #history {
      }
      #science {
      }
      #project-planet {
      }
      #puzzle {
        display: none;
      }
      .gallery {
        width: 100%;
        font-size: 60px;
        color: white;
        /*min-height: 10%;*/
        text-align: left;
        font-family: Gotham-Book;
        margin-top: 0px;
        margin-bottom: 0px;
        margin-left: 20px;
        margin-right: 20px;
        background-color: #6e298d;
        border: 0px;
        outline: none;
        padding: 18px;
        /*border-radius: 100px;*/
      }
      .galleryDetails {
        width: 95%;
        display: none;
        font-size: 45px;
        color: white;
        /*min-height: 10%;*/
        text-align: left;
        font-family: Gotham-Book;
        margin-left: 40px;
        margin-top: 10px;
        transition: display 0.2s ease-out;
      }
      .exploreButton {
        font-size: 50px;
        color: white;
        /*min-height: 10%;*/
        text-align: left;
        font-family: Gotham-Book;
        margin-top: 10px;
        margin-bottom: 10px;
        margin-right: 20px;
        background-color: #db0961;
        border: 0px;
        padding: 18px;
        /*border-radius: 100px;*/
      }
      .generalButton {
        font-size: 50px;
        color: white;
        /*min-height: 10%;*/
        text-align: left;
        font-family: Gotham-Book;
        margin-top: 10px;
        margin-bottom: 10px;
        margin-right: 20px;
        background-color: #db0961;
        border: 0px;
        padding: 18px;
        /*border-radius: 100px;*/
      }
      .accordion {
        background-color: #eee;
        color: #444;
        padding: 18px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 65px;
        transition: 0.4s;
        font-family: Gotham-Bold;
      }
      .accordionPanel {
        padding: 0 18px;
        background-color: #003066;
        overflow: hidden;
        display: none;
        transition: max-height 0.2s ease-out;
      }
      #galleryAccordion {
        margin-top: 16vh;
      }
      #galleryAccordionPanel {
        display: block;
      }
      .schedule {
        font-size: 45px;
        color: white;
        /*min-height: 10%;*/
        text-align: left;
        font-family: Gotham-Book;
        margin-top: 10px;
        margin-bottom: 10px;
        margin-right: 20px;
      }
      #scaverngerAccordionPanel {
        font-size: 45px;
        color: white;
        /*min-height: 10%;*/
        text-align: left;
        font-family: Gotham-Book;
        margin-top: 10px;
        margin-bottom: 10px;
        margin-right: 20px;
      }
      #rotationWarning {
        position: fixed;
        display: none;
        width: 100%;
        height: 100%;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 0;
        margin-left: auto;
        margin-right: auto;
        background-color: rgba(0,0,0,0.9);
        font-size: 60px;
        color: white;
        font-family: Gotham-Book;
        text-align: center;
        padding-top: 10%;
      }

      * {
        -webkit-text-size-adjust: none;
        touch-action: manipulation;
      }
      button:active {
        outline: none;
        border: none;
      }
    </style>
  </head>
  <body>
    <div id='header'><img src='FWMSH_logo.png' style='object-fit: cover; width: 100%;'></div>
    <button class="accordion" id='galleryAccordion' onclick='toggleAccordion("galleryAccordionPanel")'>Galleries</button>
    <div class="accordionPanel" id='galleryAccordionPanel'>
      <div id='galleryList'>
        <button class='gallery' id='space' onclick='toggleDetails("spaceDetails")'>Launchpad</button>
        <div class='galleryDetails' id='spaceDetails'>
          <div id='spaceDetailText'>50 years ago, we landed on the Moon. Where will we be 50 years from now?<br></div>
          <button class='exploreButton' onclick='switchPage("space/space.html")'>Explore</button>
        </div>
        <button class='gallery' id='science' onclick='toggleDetails("scienceDetails")'>Biodiversity of Texas</button>
        <div class='galleryDetails' id='scienceDetails'>
          <div id='scienceDetailText'>Discover the incredible diversity of Texas wildlife.<br></div>
          <button class='exploreButton'>Coming Soon!</button>
        </div>
        <button class='gallery' id='history' onclick='toggleDetails("historyDetails")'>Beads</button>
        <div class='galleryDetails' id='historyDetails'>
          <div id='historyDetailText'>Uncover the hidden history of beads.<br></div>
          <button class='exploreButton' onclick='switchPage("beads/beads.html")'>Explore</button>
        </div>
        <button class='gallery' id='project-planet' onclick='toggleDetails("ppDetails")'>Project Planet</button>
        <div class='galleryDetails' id='ppDetails'>
          <div id='ppDetailText'>Our world is changing. What will you do?<br></div>
          <button class='exploreButton'>Coming Soon!</button>
        </div>
        <button class='gallery' id='innovation' onclick='toggleDetails("wheelsDetails")'>Wheels</button>
        <div class='galleryDetails' id='wheelsDetails'>
          <div id='wheelsDetailText'> What's your favorite thing with wheels?<br></div>
          <button class='exploreButton'>Coming Soon!</button>
        </div>
        <button class='gallery' id='vdrome' onclick='toggleDetails("vdromeDetails")'>V-DROME</button>
        <div class='galleryDetails' id='vdromeDetails'>
          <div id='vdromeDetailText'>Discover the next big thing coming to Fort Worth.<br></div>
          <button class='exploreButton' onclick=''>Coming Soon!</button>
        </div>
      </div>
    </div>

    <button id='steamLabAccordion' class="accordion" onclick='toggleAccordion("steamLabAccordionPanel")'>STEAM Lab Schedule</button>
    <div class="accordionPanel schedule" id='steamLabAccordionPanel'>
    </div>

    <button id='scienceTheaterAccordion' class="accordion" onclick='toggleAccordion("scienceTheaterAccordionPanel")'>Science Theater Schedule</button>
    <div class="accordionPanel schedule" id='scienceTheaterAccordionPanel'>
    </div>

    <button id='scavengerAccordion' class="accordion" onclick='toggleAccordion("scaverngerAccordionPanel")'>Scavenger hunt</button>
    <div class="accordionPanel" id='scaverngerAccordionPanel'>
      <H5>Test your knowledge in our fun quiz!</H5>
      <button class='generalButton' onclick='switchPage("scav_hunt/scav_hunt.html")'>Play the game</button>
    </div>

    <button id='mapAccordion' class="accordion" onclick='toggleAccordion("mapAccordionPanel")'>Map</button>
    <div class="accordionPanel" id='mapAccordionPanel'>
      <img src='map_en.jpg'></img>
    </div>

    <div id='rotationWarning'>Please rotate your device</div>
  </body>
  <script type="text/javascript" src="content.js"></script>
  <script>

  // User preferences to pass back and forth with the other pages
  var lang = 'en';
  var mediaType = 'text';
  var fontSize = 45;

  // Check for options passed from previous page
  var queryString = decodeURIComponent(window.location.search);

  var searchParams = new URLSearchParams(queryString);
  if (searchParams.has('lang')) {
    lang = searchParams.get('lang');
    if (lang == 'es') {
      $('#galleryAccordion').html('Galerías');
      $('#spaceDetailText').html('Hace 50 años, aterrizamos en la Luna. ¿Dónde estaremos dentro de 50 años?');
      $('#science').html('Ecosistemas de Texas');
      $('#scienceDetailText').html('Descubra la increíble diversidad de la vida silvestre de Texas.');
      $('#history').html('Rosario');
      $('#historyDetailText').html('Descubre la historia oculta de las cuentas.');
      $('#project-planet').html('Proyecto Planeta');
      $('#ppDetailText').html('Nuestro mundo está cambiando. ¿Qué harás?');
      $('#innovation').html('Ruedas');
      $('#wheelsDetailText').html('¿Cuál es tu cosa favorita con las ruedas?');
      $('.exploreButton').html('Explorar');
      $('#mapAccordion').html('Mapa');
      $('#activitiesAccordion').html('Actividades de hoy');
      $('#scavengerAccordion').html('Búsqueda de tesoros');
      $('#rotationWarning').html('Por favor gire su dispositivo');
    }
  }
  if (searchParams.has('mediaType')) {
    mediaType = searchParams.get('mediaType');
  }
  if (searchParams.has('fontSize')) {
    fontSize = searchParams.get('fontSize');
    formatText();
  }

  function formatText() {

    // Function to set all the necessary text sizes based on the user's preference.

    $('.galleryDetails').css('font-size',fontSize);
    $('.exploreButton').css('font-size',fontSize);
    $('.schedule').css('font-size',fontSize);
    $('.accordion').css('font-size',parseInt(fontSize) + 20);
    $('.gallery').css('font-size',parseInt(fontSize) + 10);
    $('H3').css('font-size',parseInt(fontSize) + 15);
    $('H5').css('font-size',parseInt(fontSize) + 5);
  }

  function switchPage(page) {

    // Function to switch pages while appending the user preferences

    var link = page + '?lang='+lang+'&mediaType='+mediaType+'&fontSize='+fontSize;

    window.location.href = link;
  }

  function toggleAccordion(id) {

    // Expand/collapse accordion panels

    var touched = document.getElementById(id);
    var items = document.getElementsByClassName("accordionPanel");

    if ($('#'+id).css('display') == 'none') {
      $("#"+id).css("display", "block").hide().animate({'height':'show'}, 200)
    } else $("#"+id).css("display", "none").show().animate({'height':'hide'}, 200)

    // Loop through all the galleries to hide any active ones
    for (i = 0; i < items.length; i++) {
      if (items[i] != touched && $("#"+items[i].id).css('display') == 'block'){
        $("#"+items[i].id).css("display", "none").show().animate({'height':'hide'}, 200)
      }
    }
    hideDetails();
  }

  function toggleDetails(id) {

    // Expand/collapse the details list for one gallery and collapse any others

    var touched = document.getElementById(id);
    var galDetails = document.getElementsByClassName("galleryDetails");
    if ($('#'+id).css('display') == 'none') {
      $("#"+id).css("display", "block").hide().animate({'height':'show'}, 200)
    } else $("#"+id).css("display", "none").show().animate({'height':'hide'}, 200)

    // Loop through all the galleries to hide any active ones
    for (i = 0; i < galDetails.length; i++) {
      if (galDetails[i] != touched && $("#"+galDetails[i].id).css('display') == 'block'){
        $("#"+galDetails[i].id).css("display", "none").show().animate({'height':'hide'}, 200)
      }
    }
  }

  function hideDetails() {

    // Function to hide the details view for every gallery
    $(".galleryDetails").css("display", "none");

  }

  function createSteamLabSchedule() {

    // Function to filter the schedule for events on the current day and build the scheudle HTML

    // Select the correct language
    var list_to_use = steamLabActivityList_en
    // Select the correct day of the week
    var today = new Date();
    var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    var filteredList = list_to_use.filter(d => d.day == 'Friday');//list_to_use.filter(d => d.day == days[today.getDay()]);
    if (filteredList.length > 0) {
      var html = '<H3>STEAM Lab</H3>Stay safe while goinog hands-on with these socially-distant activities.';

      for (i=0; i<filteredList.length; i++) {
        var entry = filteredList[i];
        var endDateTime = new Date(today.toDateString() + ' ' + entry['endTime']);
        if (endDateTime.getTime() > today.getTime()) { // Only add events that aren't in the past.
          html += '<H5>' + entry['title'] + '</H5>';
          html += '<strong>' + entry['startTime'] + ' - ' + entry['endTime'] + '</strong>';
          html += '<br>' + entry['desc'];
        }
      }
    } else {
      var html = '<H3>STEAM Lab</H3>The STEAM Lab is closed, but make sure to come back for our socially-distant hands-on activities in the future!';
    }

    $('#steamLabAccordionPanel').append(html);
    formatText();
  }

  function createScienceTheaterSchedule() {

    // Function to filter the schedule for events on the current day and build the scheudle HTML

    // Select the correct language
    var list_to_use = scienceTheaterActivityList_en
    // Select the correct day of the week
    var today = new Date();
    var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    var filteredList = list_to_use.filter(d => d.day == 'Friday');//list_to_use.filter(d => d.day == days[today.getDay()]);
    if (filteredList.length > 0) {
      var html = '<H3>Science Theater</H3>The Science Theater features daily live demonstrations, talks, and stories with Museum staff. Socially-distant seating is provided.';

      for (i=0; i<filteredList.length; i++) {
        var entry = filteredList[i];
        var endDateTime = new Date(today.toDateString() + ' ' + entry['endTime']);
        if (endDateTime.getTime() > today.getTime()) { // Only add events that aren't in the past.
          html += '<H5>' + entry['title'] + '</H5>';
          html += '<strong>' + entry['startTime'] + ' - ' + entry['endTime'] + '</strong>';
          html += '<br>' + entry['desc'];
        }
      }
    } else {
      var html = '<H3>Science Theater</H3>The Science Theater is closed, but make sure to come back for our socially-distant demos, talks, and stories in the future!';
    }

    $('#scienceTheaterAccordionPanel').append(html);
    formatText();
  }

  // Detect landscape and warn
  $(window).resize(function() {
    var screenAspect = $(this).width()/$(this).height();
    var overlay = document.getElementById('rotationWarning');

    if (screenAspect > 1) {
      overlay.style.display = 'block';
    } else {
      overlay.style.display = 'none';
    }
  });

  // Populate the schedules
  createSteamLabSchedule();
  createScienceTheaterSchedule();

  </script>

</html>
